erdiagram Nahrungsmittel
notation=default




// Core Product & Identification

entity Product {
  product_id  
  code
  lc
  quantity
  serving_size
  obsolete
  obsolete_since_date
  link
  packaging_id
  nova_group
  nova_group_tag
}

entity ProductTranslation {
  product_id
  language_code
  product_name
  abbreviated_product_name
  generic_name
}

entity Producer {
  product_id 
  producer_product_id
  producer_version_id
  producer_de
  brand_owner
}

entity Brand {
  brand_id
  brand_name
  brand_tag
}

entity ProductBrand {
  product_id
  brand_id
}

entity Category {
  category_id
  category_name
  category_tag
}

entity ProductCategory {
  product_id
  category_id
}

entity Foodgroup {
  food_group_id
  food_group_name
}

entity Foodgrouptag {
  food_group_tag_id
  food_group_tag_name
}

entity FoodgroupFoodgrouptag {
  food_group_id
  food_group_tag_id
}

entity ProductFoodgroup {
  product_id
  food_group_id
}

entity Store {
  store_id
  store_name
  store_tag
}

entity ProductStore {
  product_id
  store_id
}

entity Country {
  country_id
  country_name
  country_tag
}

entity ProductCountry {
  product_id
  country_id
}


// Composition & Ingredients
entity Ingredienttranslation {
  ingredient_translation_id____+
  language_code
  ingredient_name
}

entity ProductIngredienttranslation {
  product_id
  ingredient_translation_id____lc
}

entity Ingredient {
  ingredient_id
  ingredient_name
}

entity ProductIngredient {
  product_id
  ingredient_id
}

entity Allergen {
  allergen_id
  allergen_name
  allergen_tag
}

entity Trace {
  trace_id
  trace_name
  trace_tag
}

entity ProductAllergen {
  product_id
  allergen_id
}

entity ProductTrace {
  product_id
  trace_id
}

entity Origin {
  product_id
  origin_name
  origin_tag
  manufacturing_place
  manufacturing_place_tag
  emb_code
  emb_code_tag
}

entity OriginTranslation {
  product_id
  language_code____+
  origin_name
}

entity Packaging {
  product_id
  packaging_level____+
  packaging_number
  packaging_shape
  packaging_material
  packaging_recycling
  packaging_weight_measured
}

entity Packagingtype {
  packaging_type_id
  packaging_type_name
  packaging_type_tag
}

entity ProductPackagingtype {
  product_id
  packaging_type_id
}


// Nutrition
// not reviewed ////////////////////////////////////////////////////////////////////////////
entity NutritionFact {
  product_id
  nutrition_data_per
  nutrition_data_prepared_per
  nutrient_name____+
  nutrient_value
  nutrient_unit____unit_id
  nutrient_prepared_value
  nutrient_prepared_unit____unit_id
}

entity Nutrient {
  nutrient_name
  nutrient_group
  nutrient_unit____unit_id
}

entity Unit {
  unit_id
  unit_name
  unit_symbol
  conversion_factor_to_base
}


// Classification & Scoring

entity Label {
  product_id
  labels
  labels_tags
}

entity Score {
  product_id
  nutriscore_grade_producer
  nutriscore_grade
  nutriscore_score
  environmental_score_grade
  environmental_score_score
  packaging_score
  origins_score
  production_system_score
  threatened_species_score
}


// Reference & Metadata

entity ReferenceData {
  product_id
  conservation_conditions_fr
  preparation_fr
  customer_service_fr
  data_sources
  sources_fields
}








// Relationships

// Entity Product

relationship Product_1 {
  Product -> ProductTranslation
}

relationship Product_2 {
  Product -> NutritionFact
}

relationship Product_3 {
  Product -> Producer
}

relationship Product_4 {
  Product -> Label
}

relationship Product_5 {
  Product -> Brand
}

relationship Product_6 {
  Product -> Store
}

relationship Product_7 {
  Product -> Allergen
}

relationship Product_8 {
  Product -> IngredientTranslation
}

relationship Product_9 {
  Product -> Category
}

relationship Product_10 {
  Product -> ReferenceData
}

relationship Product_11 {
  Product -> Origin
}

relationship Product_12 {
  Product -> OriginTranslation
}

relationship Product_13 {
  Product -> Score
}

relationship Product_14 {
  Product -> PackagingTranslation
}


// Entity Packaging

relationship Packaging_1 {
  Packaging -> Product
}

relationship Packaging_2 {
  Packaging -> PackagingTranslation
}


// Entity Nutrient

relationship Nutrient_1 {
  Nutrient -> NutritionFact
}


// Entity Unit

relationship Unit_1 {
  Unit -> Nutrient
}

relationship Unit_2 {
  Unit -> NutritionFact
}